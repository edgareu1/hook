// If there are any errors in the submited form, then refresh the form to display validation errors
<% if @catch.errors.any? %>
  document.getElementById('ModalNewCatch').innerHTML = "<%= j render "catches/form", catch: @catch %>";

// Otherwise...
<% else %>
  // Close the Modal
  document.querySelector('#ModalNewCatch button').click();

  // Clean the form
  document.getElementById('ModalNewCatch').innerHTML = "<%= j render "catches/form", catch: Catch.new %>";

  // Append the new Catch to the list
  $('#catches-list table').append("<%= j render "catches/catch", catch: @catch %>");

  // Add flash congratulating the User if he does catches a big Fish
  <% if (@catch.weight / @catch.quantity) > @catch.fish.good_weight %>
    createFlashes("Congratulations, it's a BIGGIN!");
  <% end %>
<% end %>

function createFlashes(text) {
  // Create alert 'div'
  var div = document.createElement('div');
  div.classList = `alert alert-dismissible fade show m-1`;
  div.setAttribute("role", "alert");

  // Add text to the alert
  var alert = document.createTextNode(text);
  div.appendChild(alert);

  // Create closing button
  var button = document.createElement('button');
  button.setAttribute("type", "button");
  button.classList = 'close';
  button.setAttribute("data-dismiss", "alert");
  button.setAttribute("aria-label", "Close");

  // Button 'X' symbol
  var span = document.createElement('span');
  span.setAttribute("aria-hidden", "true");
  span.innerHTML = '&times;';

  button.appendChild(span);
  div.appendChild(button);

  // Append 'div' to the body of the document
  document.body.appendChild(div);
}
