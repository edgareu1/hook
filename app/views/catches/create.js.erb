// If there are any errors in the submited form...
<% if @catch.errors.any? %>
  // Clean the form
  document.getElementById('ModalNewCatch').innerHTML = "<%= j render "catches/form", catch: @catch %>";

  // Display the Catch form errors
  displayFormErrors('catch', 'weight', `<%= @catch.errors.full_messages_for(:weight).first %>`);
  displayFormErrors('catch', 'fish_id', `<%= @catch.errors.full_messages_for(:fish).first %>`);
  displayFormErrors('catch', 'quantity', `<%= @catch.errors.full_messages_for(:quantity).first %>`);

// Otherwise...
<% else %>
  // Close the modal
  document.querySelector('#ModalNewCatch button').click();

  // Clean the form
  document.getElementById('ModalNewCatch').innerHTML = "<%= j render "catches/form", catch: Catch.new %>";

  // If the list of Catches was empty, refresh its content
  <% if @log.catches.size == 1 %>
    document.getElementById('catches-list').innerHTML = "<%= j render "catches/list", catches: @log.catches %>";

  // Otherwise, append the new Catch into the list
  <% else %>
    $('#catches-list table').append("<%= j render "catches/catch", catch: @catch %>");
  <% end %>

  // If the User does Catch a big Fish, add a flash congratulating him
  <% if (@catch.weight / @catch.quantity) > @catch.fish.good_weight %>
    createFlash("Congratulations, it's a BIGGIN!");
  <% end %>
<% end %>
