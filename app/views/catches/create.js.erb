// If there are any errors in the submited form, then refresh the form to display validation errors
<% if @catch.errors.any? %>
  document.getElementById('ModalNewCatch').innerHTML = "<%= j render "catches/form", catch: @catch %>";

// Otherwise...
<% else %>
  // Close the Modal
  document.querySelector('#ModalNewCatch button').click();

  // Clean the form
  document.getElementById('ModalNewCatch').innerHTML = "<%= j render "catches/form", catch: Catch.new %>";

  // If there is no Catch yet, then remove the row displaying "Nothing caught" if it so exists
  <% if @log.catches.size == 1 %>
    document.getElementById('catches-list').innerHTML = "<%= j render "catches/container", catches: @log.catches %>";

  // Otherwise, append the new Catch to the list
  <% else %>
    $('#catches-list table').append("<%= j render "catches/catch", catch: @catch %>");
  <% end %>

  // Add flash congratulating the User if he does catches a big Fish
  <% if (@catch.weight / @catch.quantity) > @catch.fish.good_weight %>
    createFlash("Congratulations, it's a BIGGIN!");
  <% end %>
<% end %>
