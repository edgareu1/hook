<div class="page-container">
  <!-- Log information -->
  <div id="log-information">
    <%= render "logs/information", log: @log %>
  </div>

  <!-- List of Catches as a Table -->
  <div class="list-border-top" style="margin-top: 25px; padding: 10px">
    <table style="width: 100%">
      <!-- If there are no Catches, then... -->
      <% if @log.catches.empty? %>
        <tr>
          <th style="display: flex; flex-direction: row; justify-content: space-between">
            <h3 style="margin-left: 10px">Catches</h3>

            <%= link_to "Create", data: { toggle: "modal", target: "#ModalNewCatch" },
                style: "color: white; opacity: 0.9" do %>
              <i class="fas fa-plus" style="font-size: 30px"></i>
            <% end %>
          </th>
        </tr>

        <tr>
          <td><p style="margin: 0"> Nothing caught </p></td>
        </tr>

      <!-- If there are some Catches, then... -->
      <% else %>
        <!-- Catches Table Headers -->
        <tr style="width: 100%">
          <th style="width: 55%">
            <h3 style="margin-left: 10px">Catches</h3>
          </th>

          <th style="width: 15%; text-align: center">
            <h6 style="font-size: 16px">Qnt</h6>
          </th>

          <th style="width: 15%; text-align: center">
            <h6 style="font-size: 16px">Kg</h6>
          </th>

          <th style="width: 15%; text-align: center">
            <%= link_to "Create", data: { toggle: "modal", target: "#ModalNewCatch" },
                style: "color: white; opacity: 0.9" do %>
              <i class="fas fa-plus" style="font-size: 26px"></i>
            <% end %>
          </th>
        </tr>

        <!-- Iterate over the Catches and display them as Rows of the Table -->
        <% @log.catches.each do |catch| %>
          <tr style="height: 60px; border-top: 2px solid white; text-align: center">
            <td style="text-align: left">
              <%= link_to "Info", data: { toggle: "modal", target: "#ModalFishInfo-#{catch.fish.id}" },
                  class: "btn btn-flat", style: "margin-left: 5px; font-size: 15.5px" do %>
                <%= catch.fish.common_name %>
              <% end %>
            </td>

            <td style="font-size: 16px">
              <%= catch.quantity %>
            </td>

            <td style="font-size: 16px">
              <%= catch.weight.fdiv(1000).round(1).tap { |n| break n.to_i == n ? n.to_i : n } %>
            </td>

            <td>
              <%= link_to "Delete", data: { toggle: "modal", target: "#ModalDeleteCatch#{catch.id}" } do %>
                <i class="far fa-trash-alt" style="font-size: 18px; color: white; opacity: 0.9; margin-right: 5px"></i>
              <% end %>
            </td>
          </tr>

          <!-- Modal Fish Info -->
          <div class="modal fade" id="ModalFishInfo-<%= catch.fish.id %>">
            <%= render "fish/modal-info", catch: catch %>
          </div>

          <!-- Modal Delete Catch -->
          <div class="modal fade" id="ModalDeleteCatch<%= catch.id %>">
            <%= render "catches/modal-delete", catch: catch %>
          </div>
        <% end %>
      <% end %>
    </table>
  </div>

  <!-- Links for Logs Modals: Delete, Edit and New -->
  <div style="width: 100%; display: flex; justify-content: flex-end">
    <%= link_to "Delete", data: { toggle: "modal", target: "#ModalDeleteLog" } do %>
      <i class="far fa-trash-alt" style="font-size: 26px; color: white"></i>
    <% end %>

    <%= link_to "Edit", data: { toggle: "modal", target: "#ModalEditLog" }, style: "margin-left: 15px" do %>
      <i class="far fa-edit" style="font-size: 26px; color: white"></i>
    <% end %>

    <%= link_to "Create", data: { toggle: "modal", target: "#ModalNewLog" }, style: "margin-left: 15px" do %>
      <i class="fas fa-plus" style="font-size: 26px; color: white"></i>
    <% end %>
  </div>
</div>

<!-- Modals -->

<!-- Modal New Catch Form -->
<div class="modal fade" id="ModalNewCatch">
  <%= render "catches/form-new" %>
</div>

<!-- Modal New Log Form -->
<div class="modal fade" id="ModalNewLog">
  <%= render "logs/form", log: Log.new %>
</div>

<!-- Modal Edit Log Form -->
<div class="modal fade" id="ModalEditLog">
  <%= render "logs/form", log: @log %>
</div>

<!-- Modal Delete Log Form -->
<div class="modal fade" id="ModalDeleteLog">
  <%= render "logs/form-delete" %>
</div>
