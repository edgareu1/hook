<div class="container">
  <%= form_tag fish_index_path, method: :get do %>
    <div class="d-flex mt-2">
      <%= text_field_tag :query,
        params[:query],
        class: "form-control",
        id: "search-input",
        placeholder: "Find a fish",
        autocomplete: "off"
      %>
      <%= submit_tag "Search", class: "btn btn-primary" %>
    </div>
  <% end %>

  <% @fish.each do |fish| %>
    <%= link_to fish_path(fish), data: { id: fish.id }, class:"fish_box" do %>
    <div class="fish-card">
      <%= image_tag fish.picture_url %>
      <div class="fish-card-infos">
        <h2><%= fish.common_name.upcase %></h2>
        <p>
          Minimum size:
          <% unless fish.legal_weight.nil? %>
            <% if fish.legal_weight < 1000 %>
              <%= "#{fish.legal_weight} gr" %>
            <% else %>
              <%= "#{fish.legal_weight / 1000} kg" %>
            <% end %>
          <% end %>

          <% if !fish.legal_weight.nil? && !fish.legal_size.nil?  %>
            <%= " / " %>
          <% end %>

          <% unless fish.legal_size.nil? %>
            <%= "#{fish.legal_sizet} cm" %>
          <% end %>
        </p>
      </div>
    </div>
    <% end %>
  <% end %>
</div>
