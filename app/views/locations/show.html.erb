<!-- Title -->
<div class="page-title">
  <h1><%= @location.name_to_display %></h1>
  <h2 class="locations-spot" ><%= @location.spot %></h2>
</div>

<!-- Card Weather Info -->
<div class="card" style="margin-bottom: 20px">
  <!-- Card's Headers  -->
  <div class="log-stats-headers">
    <!-- Image of the Locations Weather -->
    <div style="background-image: url(http://openweathermap.org/img/wn/<%= @location_weather[:icon] %>@2x.png)"
         class="weather-icon">
    </div>

    <h3><%= @location_weather[:description].capitalize %></h3>
  </div>

  <!-- Card's Content -->
  <div class="log-stats-content">
    <table style="margin: 0 auto">
      <tr>
        <td>Country</td>
        <td></td>
        <td><%= @location.country.truncate(20) %></td>
      </tr>

      <tr>
        <td>State</td>
        <td></td>
        <td><%= @location.state.truncate(20) %></td>
      </tr>

      <tr>
        <td>City</td>
        <td></td>
        <td><%= @location.city.truncate(20) %></td>
      </tr>

      <tr>
        <td><hr style="min-width: 100px"></td>
        <td></td>
        <td><hr style="min-width: 140px"></td>
      </tr>

      <tr>
        <td>Air pressure</td>
        <td></td>
        <td><%= "#{@location_weather[:air_pressure]} Pa" %></td>
      </tr>

      <tr>
        <td>Wind Speed</td>
        <td></td>
        <td><%= "#{@location_weather[:wind_speed]} m/s" %></td>
      </tr>

      <tr>
        <td>Temperature</td>
        <td></td>
        <td><%= "#{@location_weather[:temperature]} Â°C" %></td>
      </tr>

      <tr>
        <td>Moon Phase</td>
        <td></td>
        <td><%= @location_weather[:moon_phase] %>%</td>
      </tr>

      <% unless @location.logs_count.zero? %>
        <tr>
          <td><hr style="min-width: 100px"></td>
          <td></td>
          <td><hr style="min-width: 140px"></td>
        </tr>

        <tr>
          <td>Num Logs</td>
          <td></td>
          <td><%= @location.logs_count %></td>
        </tr>

        <tr>
          <td>Last Log</td>
          <td></td>
          <td><%= time_ago_in_words(@location.logs.map(&:end_time).sort.last) %> ago</td>
        </tr>

        <tr>
          <td>Num Catches</td>
          <td></td>
          <td><%= @location.catch_count %></td>
        </tr>

        <tr>
          <td>Weight Caught</td>
          <td></td>
          <td><%= rounded_weight(@location.catch_weight) %></td>
        </tr>
      <% end %>
    </table>
  </div>
</div>

<!-- Links for Locations Modals: Delete and New -->
<div class="log-actions">
  <%= link_to "Delete", data: { toggle: "modal", target: "#ModalDeleteLocation" } do %>
    <i class="far fa-trash-alt" style="font-size: 26px; color: white"></i>
  <% end %>

  <%= link_to "Edit", data: { toggle: "modal", target: "#ModalEditLocation" }, style: "margin-left: 15px" do %>
    <i class="far fa-edit" style="font-size: 26px; color: white"></i>
  <% end %>

  <%= link_to "Create", data: { toggle: "modal", target: "#ModalNewLocation" }, style: "margin-left: 15px" do %>
    <i class="fas fa-plus" style="font-size: 26px; color: white"></i>
  <% end %>
</div>

<!-- Modal New Location Form -->
<div class="modal fade" id="ModalNewLocation" role="dialog">
  <%= render "locations/form", location: Location.new %>
</div>

<!-- Modal Edit Location Form -->
<div class="modal fade" id="ModalEditLocation" role="dialog">
  <%= render "locations/form", location: @location %>
</div>

<!-- Modal Delete Location Form -->
<div class="modal modal-delete fade" id="ModalDeleteLocation" role="dialog">
  <%= render "locations/form-delete" %>
</div>
